<div ng-show="authenticated">
	
	<div ng-controller="portfolioController" ng-cloak class="ng-cloak">

		<h1>Portfolio {{portfolio.label}} Market Positions</h1>

		<table ng-table="vm.tableParams" class="table" show-filter="true">
			<tr>
				<th>Stock</th>
				<th>Amount</th>
				<th>Open Price</th>
				<th>Investment</th>
				<th>Close Price</th>
				<th>Earnings/losses</th>
				<th>Trade Date</th>
			</tr>

	

			<tr ng-repeat="position in positions">
			
				<td><a href="#/stock_detail?stockInfo={{position.stock._links.self.href}}">{{position.stock.ticker}}</a></td>
				<td>{{position.amount}}</td>
				<td>{{position.price | currency:"EUR":2}}</td>
				<td>{{position.amount * position.price |  currency:"EUR":2}}</td>
				<td> {{position.currentPrice |  currency:"EUR":2}}</td>
				<th> {{(position.currentPrice - position.price) * position.amount | number}} </td>
				<td>{{position.tradeDate | date}}</td>
			</tr>
		</table>
	</div>
	
	<div class="alert" ng-show="stokkerError == 'unavailable'" >
		Portfolio valuations are not available if Stokker is not running!
	</div>
	
</div>

